## Istio

[Istio](https://istio.io/) is een service mesh. Dit houdt in dat een extra netwerk laag wordt toegevoegd aan kubernetes. Hiermee kan op een flexibele manier geautomatiseerd gedrag op de netwerk laag gerealiseerd worden. Functionaliteiten variëren van security en controle tot observability en controle over netwerk verkeer binnen een kubernetes cluster.

## Sidecar

De [sidecar](https://istio.io/latest/docs/reference/config/networking/sidecar/) is een component van Istio waar we bepaalde filter- en controlestappen kunnen uitvoeren tijdens het verwerken van requests (berichten naar een service, bijvoorbeeld voor het ophalen van data). Iedere aangesloten service heeft zijn eigen sidecar. Wanneer we een request uitvoeren naar een service dan komt dit request eerst aan bij de sidecar. Hier controleert de sidecar of de JWT token geldig is door middel van de ingebouwde cryptografische handtekening, en of de token toestemming geeft tot de bevraagde data. Naast deze controlestappen zorgt de sidecar er ook voor dat de versleutelde pseudoniemen ontsleuteld worden zodat de verwerker van de request deze in bruikbare vorm ontvangt. Als laatste voert de sidecar een aantal logboek functies uit. De sidecar maakt melding van de gebruikte JWT tokens, de gevraagde data, en de gezondheid van de databron.

## JWT token

Een [JWT token](https://jwt.io/) is een ondertekend stukje data, ingepakt in een gestandaardiseerd formaat. JWT tokens bestaan uit drie [base64](https://en.wikipedia.org/wiki/Base64) gecodeerde delen, aan elkaar gekoppeld door middel van puntjes (“.”) om het gebruik van de tokens als normale strings (tekst data) te versimpelen. Het eerste deel bevat de informatie over de gebruikte sleutel technologie waarmee de handtekening gegenereerd zodat een ontvanger weet hoe deze de handtekening van de token kan controleren. Het tweede deel bestaat uit data. Hierin slaat de OpenID service o.a. data op over de gebruiker die bij de token hoort, de bijbehorende toestemmingen, de ontvanger van de token, en onder welke condities deze is afgegeven. Het laatste deel van de token bestaat uit een handtekening. Een ontvangende partij kan de token controleren door de handtekening te vergelijken met een publieke sleutel van de OpenID service. Hierdoor kunnen de JWT tokens gebruikt worden als decentraal verificatie en autorisatie mechanisme omdat er geen data hoeft te worden opgehaald bij een centrale service om te controleren of de token toegang geeft tot de bevraagde data. Deze toegangsinformatie is namelijk deel van de JWT token.
